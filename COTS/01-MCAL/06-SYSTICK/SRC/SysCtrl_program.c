/**
 * @file SysCtrl_program.c
 * @author Mazen Ahmed Taha (MazenATaha@gmail.com)
 * @brief 
 * @version 0.1
 * @date 2022-08-24
 * 
 * @copyright Copyright (c) 2022
 * 
 */




/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "../COTS/02-LIB/Common/STD_TYPES.h"
#include "../COTS/02-LIB/Common/BIT_MATH.h"
#include "../COTS/02-LIB/Common/TM4C123.h"
#include "../COTS/01-MCAL/06-SYSTICK/INC/SysCtrl_Configure.h"
#include "../COTS/01-MCAL/06-SYSTICK/INC/SysCtrl_private.h"
#include "../COTS/01-MCAL/06-SYSTICK/INC/SysCtrl_Interface.h"

/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/



/**********************************************************************************************************************
 *  LOCAL DATA 
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/
void SysCtrl_MicrocontrollerInit (void)
{
	RCC.B.MOSCDIS	= !(MAIN_OSCILLATOR);
	RCC.B.OSCSRC 	= OSCILLATOR_SOURCE ;
	RCC.B.XTAL  	= CRYSTAL_VALUE     ;
	RCC.B.BYPASS	= PLL_BYPASS 		;

	RCC.B.PWMDIV	= PWM_DIVISOR		;
	RCC.B.USEPWMDIV	= PWM_DIVISOR_EN	;
	RCC.B.USESYSDIV	= SYSCLOCK_DIVIDER_EN;
	RCC.B.SYSDIV	= SYSTEM_CLOCK_DIVIDER -1 ;
	RCC.B.ACG		= AUTO_CLOCK_GATING ;
		
	RCC2.B.OSCSRC2  = OSCILLATOR_SOURCE_2;
	RCC2.B.BYPASS2  = PLL_BYPASS_2		;
	RCC2.B.PWRDN2   = PLL_POWER_DOWN_2 	;
	RCC2.B.USBPWRDN = PWRDN_USB_PLL		;
	RCC2.B.DIV400 	= DIVIDE_PLL_AS		;
	
	RCC2.B.SYSDIV2	= SYSTEM_CLOCK_DIVIDER_2 -1 ;
    
	RCC2.B.USERCC2	= USE_RCC2			;

	
}
